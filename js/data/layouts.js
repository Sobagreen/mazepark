export function duplicateLayout(layout) {
  return layout.map((row) => row.slice());
}

export const BASE_LAYOUT = [
  ["Л1ВН", "П", "П", "П", "1Щ1ВН", "В1ВВ", "2Щ1ВН", "1З1ВН", "П", "П"],
  ["П", "П", "2З1Л", "П", "П", "П", "П", "П", "П", "П"],
  ["П", "П", "П", "7З2ВВ", "П", "П", "П", "П", "П", "П"],
  ["3З1П", "П", "5З2Л", "П", "1Т1П", "2Т1ВН", "П", "4З1ВН", "П", "6З2ВВ"],
  ["5З1ВН", "П", "3З2ВВ", "П", "1Т2ВН", "2Т2П", "П", "6З1П", "П", "4З2Л"],
  ["П", "П", "П", "П", "П", "П", "7З1ВН", "П", "П", "П"],
  ["П", "П", "П", "П", "П", "П", "П", "2З2П", "П", "П"],
  ["П", "П", "1З2ВВ", "1Щ2ВВ", "В2ВВ", "2Щ2ВВ", "П", "П", "П", "Л2ВВ"]
];

export const MODERN_LAYOUT = [
  ["1З1ВВ", "1З1П", "1З1ВН", "1З1Л", "П", "П", "П", "П", "П", "П"],
  ["П", "П", "П", "П", "П", "П", "П", "П", "П", "П"],
  ["П", "П", "П", "П", "П", "П", "П", "П", "П", "П"],
  ["П", "П", "П", "П", "П", "П", "П", "П", "П", "П"],
  ["П", "П", "П", "П", "П", "П", "П", "П", "П", "П"],
  ["П", "П", "П", "П", "П", "П", "П", "П", "П", "П"],
  ["П", "П", "П", "П", "П", "П", "П", "П", "П", "П"],
  ["1З2ВВ", "1З2П", "1З2ВН", "1З2Л", "П", "П", "П", "П", "П", "П"]
];

export const LEGACY_LAYOUT = [
  ["Л1ВН", "П", "П", "П", "1З1Л", "1Щ1ВН", "2З1ВН", "П", "П", "П"],
  ["П", "П", "П", "П", "П", "В1ВН", "П", "П", "П", "П"],
  ["3З1П", "П", "П", "П", "4З1Л", "2Щ1ВН", "1Т1ВН", "П", "П", "П"],
  ["5З1ВН", "П", "2Т1П", "П", "1З2ВВ", "П", "2З2ВН", "П", "П", "П"],
  ["П", "П", "П", "6З1ВВ", "П", "7З1ВН", "П", "1Т2Л", "П", "3З2ВВ"],
  ["П", "П", "П", "2Т2ВН", "1Щ2ВВ", "4З2П", "П", "П", "П", "5З2Л"],
  ["П", "П", "П", "П", "В2ВВ", "П", "П", "П", "П", "П"],
  ["П", "П", "П", "6З2ВВ", "2Щ2ВВ", "7З2П", "П", "П", "П", "Л2ВВ"]
];

export const STARTING_LAYOUT_ORDER = ["basic", "modern", "legacy"];

export const STARTING_LAYOUTS = {
  basic: { label: "Базовая", tokens: BASE_LAYOUT },
  modern: { label: "Модерн", tokens: MODERN_LAYOUT },
  legacy: { label: "Легаси", tokens: LEGACY_LAYOUT }
};

export const DEFAULT_LAYOUT_KEY = "basic";

export const TOKEN_MAP = {
  "П": null,
  "Л1ВВ": { type: "laser", player: "light", orientation: 0 },
  "Л1П": { type: "laser", player: "light", orientation: 1 },
  "Л1ВН": { type: "laser", player: "light", orientation: 2 },
  "Л1Л": { type: "laser", player: "light", orientation: 3 },
  "Л2ВВ": { type: "laser", player: "shadow", orientation: 0 },
  "Л2П": { type: "laser", player: "shadow", orientation: 1 },
  "Л2ВН": { type: "laser", player: "shadow", orientation: 2 },
  "Л2Л": { type: "laser", player: "shadow", orientation: 3 },
  "В1ВВ": { type: "volhv", player: "light", orientation: 0 },
  "В1П": { type: "volhv", player: "light", orientation: 1 },
  "В1ВН": { type: "volhv", player: "light", orientation: 2 },
  "В1Л": { type: "volhv", player: "light", orientation: 3 },
  "В2ВВ": { type: "volhv", player: "shadow", orientation: 0 },
  "В2П": { type: "volhv", player: "shadow", orientation: 1 },
  "В2ВН": { type: "volhv", player: "shadow", orientation: 2 },
  "В2Л": { type: "volhv", player: "shadow", orientation: 3 },
  "1З1ВВ": { type: "mirror", player: "light", orientation: 0 },
  "1З1П": { type: "mirror", player: "light", orientation: 1 },
  "1З1ВН": { type: "mirror", player: "light", orientation: 2 },
  "1З1Л": { type: "mirror", player: "light", orientation: 3 },
  "2З1ВВ": { type: "mirror", player: "light", orientation: 0 },
  "2З1П": { type: "mirror", player: "light", orientation: 1 },
  "2З1ВН": { type: "mirror", player: "light", orientation: 2 },
  "2З1Л": { type: "mirror", player: "light", orientation: 3 },
  "3З1ВВ": { type: "mirror", player: "light", orientation: 0 },
  "3З1П": { type: "mirror", player: "light", orientation: 1 },
  "3З1ВН": { type: "mirror", player: "light", orientation: 2 },
  "3З1Л": { type: "mirror", player: "light", orientation: 3 },
  "4З1ВВ": { type: "mirror", player: "light", orientation: 0 },
  "4З1П": { type: "mirror", player: "light", orientation: 1 },
  "4З1ВН": { type: "mirror", player: "light", orientation: 2 },
  "4З1Л": { type: "mirror", player: "light", orientation: 3 },
  "5З1ВВ": { type: "mirror", player: "light", orientation: 0 },
  "5З1П": { type: "mirror", player: "light", orientation: 1 },
  "5З1ВН": { type: "mirror", player: "light", orientation: 2 },
  "5З1Л": { type: "mirror", player: "light", orientation: 3 },
  "6З1ВВ": { type: "mirror", player: "light", orientation: 0 },
  "6З1П": { type: "mirror", player: "light", orientation: 1 },
  "6З1ВН": { type: "mirror", player: "light", orientation: 2 },
  "6З1Л": { type: "mirror", player: "light", orientation: 3 },
  "7З1ВВ": { type: "mirror", player: "light", orientation: 0 },
  "7З1П": { type: "mirror", player: "light", orientation: 1 },
  "7З1ВН": { type: "mirror", player: "light", orientation: 2 },
  "7З1Л": { type: "mirror", player: "light", orientation: 3 },
  "1З2ВВ": { type: "mirror", player: "shadow", orientation: 0 },
  "1З2П": { type: "mirror", player: "shadow", orientation: 1 },
  "1З2ВН": { type: "mirror", player: "shadow", orientation: 2 },
  "1З2Л": { type: "mirror", player: "shadow", orientation: 3 },
  "2З2ВВ": { type: "mirror", player: "shadow", orientation: 0 },
  "2З2П": { type: "mirror", player: "shadow", orientation: 1 },
  "2З2ВН": { type: "mirror", player: "shadow", orientation: 2 },
  "2З2Л": { type: "mirror", player: "shadow", orientation: 3 },
  "3З2ВВ": { type: "mirror", player: "shadow", orientation: 0 },
  "3З2П": { type: "mirror", player: "shadow", orientation: 1 },
  "3З2ВН": { type: "mirror", player: "shadow", orientation: 2 },
  "3З2Л": { type: "mirror", player: "shadow", orientation: 3 },
  "4З2ВВ": { type: "mirror", player: "shadow", orientation: 0 },
  "4З2П": { type: "mirror", player: "shadow", orientation: 1 },
  "4З2ВН": { type: "mirror", player: "shadow", orientation: 2 },
  "4З2Л": { type: "mirror", player: "shadow", orientation: 3 },
  "5З2ВВ": { type: "mirror", player: "shadow", orientation: 0 },
  "5З2П": { type: "mirror", player: "shadow", orientation: 1 },
  "5З2ВН": { type: "mirror", player: "shadow", orientation: 2 },
  "5З2Л": { type: "mirror", player: "shadow", orientation: 3 },
  "6З2ВВ": { type: "mirror", player: "shadow", orientation: 0 },
  "6З2П": { type: "mirror", player: "shadow", orientation: 1 },
  "6З2ВН": { type: "mirror", player: "shadow", orientation: 2 },
  "6З2Л": { type: "mirror", player: "shadow", orientation: 3 },
  "7З2ВВ": { type: "mirror", player: "shadow", orientation: 0 },
  "7З2П": { type: "mirror", player: "shadow", orientation: 1 },
  "7З2ВН": { type: "mirror", player: "shadow", orientation: 2 },
  "7З2Л": { type: "mirror", player: "shadow", orientation: 3 },
  "1Щ1ВВ": { type: "shield", player: "light", orientation: 0 },
  "1Щ1П": { type: "shield", player: "light", orientation: 1 },
  "1Щ1ВН": { type: "shield", player: "light", orientation: 2 },
  "1Щ1Л": { type: "shield", player: "light", orientation: 3 },
  "1Щ2ВВ": { type: "shield", player: "shadow", orientation: 0 },
  "1Щ2П": { type: "shield", player: "shadow", orientation: 1 },
  "1Щ2ВН": { type: "shield", player: "shadow", orientation: 2 },
  "1Щ2Л": { type: "shield", player: "shadow", orientation: 3 },
  "2Щ1ВВ": { type: "shield", player: "light", orientation: 0 },
  "2Щ1П": { type: "shield", player: "light", orientation: 1 },
  "2Щ1ВН": { type: "shield", player: "light", orientation: 2 },
  "2Щ1Л": { type: "shield", player: "light", orientation: 3 },
  "2Щ2ВВ": { type: "shield", player: "shadow", orientation: 0 },
  "2Щ2П": { type: "shield", player: "shadow", orientation: 1 },
  "2Щ2ВН": { type: "shield", player: "shadow", orientation: 2 },
  "2Щ2Л": { type: "shield", player: "shadow", orientation: 3 },
  "3Щ1ВВ": { type: "shield", player: "light", orientation: 0 },
  "3Щ1П": { type: "shield", player: "light", orientation: 1 },
  "3Щ1ВН": { type: "shield", player: "light", orientation: 2 },
  "3Щ1Л": { type: "shield", player: "light", orientation: 3 },
  "3Щ2ВВ": { type: "shield", player: "shadow", orientation: 0 },
  "3Щ2П": { type: "shield", player: "shadow", orientation: 1 },
  "3Щ2ВН": { type: "shield", player: "shadow", orientation: 2 },
  "3Щ2Л": { type: "shield", player: "shadow", orientation: 3 },
  "4Щ1ВВ": { type: "shield", player: "light", orientation: 0 },
  "4Щ1П": { type: "shield", player: "light", orientation: 1 },
  "4Щ1ВН": { type: "shield", player: "light", orientation: 2 },
  "4Щ1Л": { type: "shield", player: "light", orientation: 3 },
  "4Щ2ВВ": { type: "shield", player: "shadow", orientation: 0 },
  "4Щ2П": { type: "shield", player: "shadow", orientation: 1 },
  "4Щ2ВН": { type: "shield", player: "shadow", orientation: 2 },
  "4Щ2Л": { type: "shield", player: "shadow", orientation: 3 },
  "5Щ1ВВ": { type: "shield", player: "light", orientation: 0 },
  "5Щ1П": { type: "shield", player: "light", orientation: 1 },
  "5Щ1ВН": { type: "shield", player: "light", orientation: 2 },
  "5Щ1Л": { type: "shield", player: "light", orientation: 3 },
  "5Щ2ВВ": { type: "shield", player: "shadow", orientation: 0 },
  "5Щ2П": { type: "shield", player: "shadow", orientation: 1 },
  "5Щ2ВН": { type: "shield", player: "shadow", orientation: 2 },
  "5Щ2Л": { type: "shield", player: "shadow", orientation: 3 },
  "6Щ1ВВ": { type: "shield", player: "light", orientation: 0 },
  "6Щ1П": { type: "shield", player: "light", orientation: 1 },
  "6Щ1ВН": { type: "shield", player: "light", orientation: 2 },
  "6Щ1Л": { type: "shield", player: "light", orientation: 3 },
  "6Щ2ВВ": { type: "shield", player: "shadow", orientation: 0 },
  "6Щ2П": { type: "shield", player: "shadow", orientation: 1 },
  "6Щ2ВН": { type: "shield", player: "shadow", orientation: 2 },
  "6Щ2Л": { type: "shield", player: "shadow", orientation: 3 },
  "7Щ1ВВ": { type: "shield", player: "light", orientation: 0 },
  "7Щ1П": { type: "shield", player: "light", orientation: 1 },
  "7Щ1ВН": { type: "shield", player: "light", orientation: 2 },
  "7Щ1Л": { type: "shield", player: "light", orientation: 3 },
  "7Щ2ВВ": { type: "shield", player: "shadow", orientation: 0 },
  "7Щ2П": { type: "shield", player: "shadow", orientation: 1 },
  "7Щ2ВН": { type: "shield", player: "shadow", orientation: 2 },
  "7Щ2Л": { type: "shield", player: "shadow", orientation: 3 },
  "1Т1ВВ": { type: "troop", player: "light", orientation: 0 },
  "1Т1П": { type: "troop", player: "light", orientation: 1 },
  "1Т1ВН": { type: "troop", player: "light", orientation: 2 },
  "1Т1Л": { type: "troop", player: "light", orientation: 3 },
  "1Т2ВВ": { type: "troop", player: "light", orientation: 0 },
  "1Т2П": { type: "troop", player: "light", orientation: 1 },
  "1Т2ВН": { type: "troop", player: "light", orientation: 2 },
  "1Т2Л": { type: "troop", player: "light", orientation: 3 },
  "2Т1ВВ": { type: "troop", player: "shadow", orientation: 0 },
  "2Т1П": { type: "troop", player: "shadow", orientation: 1 },
  "2Т1ВН": { type: "troop", player: "shadow", orientation: 2 },
  "2Т1Л": { type: "troop", player: "shadow", orientation: 3 },
  "2Т2ВВ": { type: "troop", player: "shadow", orientation: 0 },
  "2Т2П": { type: "troop", player: "shadow", orientation: 1 },
  "2Т2ВН": { type: "troop", player: "shadow", orientation: 2 },
  "2Т2Л": { type: "troop", player: "shadow", orientation: 3 }
};

export const BOARD_HEIGHT = STARTING_LAYOUTS[DEFAULT_LAYOUT_KEY].tokens.length;
export const BOARD_WIDTH = STARTING_LAYOUTS[DEFAULT_LAYOUT_KEY].tokens[0].length;

export function normaliseLayoutKey(key) {
  return STARTING_LAYOUTS[key] ? key : DEFAULT_LAYOUT_KEY;
}

export function getLayoutTokens(layoutKey) {
  const key = normaliseLayoutKey(layoutKey);
  return STARTING_LAYOUTS[key].tokens;
}
